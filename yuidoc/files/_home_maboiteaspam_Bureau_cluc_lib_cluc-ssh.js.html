<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/home/maboiteaspam/Bureau/cluc/lib/cluc-ssh.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Cluc.html">Cluc</a></li>
                                <li><a href="../classes/ClucAnswer.html">ClucAnswer</a></li>
                                <li><a href="../classes/ClucChildProcess.html">ClucChildProcess</a></li>
                                <li><a href="../classes/ClucConfirm.html">ClucConfirm</a></li>
                                <li><a href="../classes/ClucContext.html">ClucContext</a></li>
                                <li><a href="../classes/.html"></a></li>
                                <li><a href="../classes/ClucDieOnError.html">ClucDieOnError</a></li>
                                <li><a href="../classes/ClucDisplay.html">ClucDisplay</a></li>
                                <li><a href="../classes/ClucMustNot.html">ClucMustNot</a></li>
                                <li><a href="../classes/ClucProgress.html">ClucProgress</a></li>
                                <li><a href="../classes/ClucRule.html">ClucRule</a></li>
                                <li><a href="../classes/ClucSpin.html">ClucSpin</a></li>
                                <li><a href="../classes/ClucSpinUntil.html">ClucSpinUntil</a></li>
                                <li><a href="../classes/ClucSsh.html">ClucSsh</a></li>
                                <li><a href="../classes/ClucSSHContext.html">ClucSSHContext</a></li>
                                <li><a href="../classes/ClucSuccess.html">ClucSuccess</a></li>
                                <li><a href="../classes/ClucWarn.html">ClucWarn</a></li>
                                <li><a href="../classes/ClucWatch.html">ClucWatch</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: /home/maboiteaspam/Bureau/cluc/lib/cluc-ssh.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">


var pkg = require(&#x27;../package.json&#x27;);
var debug = require(&#x27;debug&#x27;)(pkg.name);
var SSH2Utils = require(&#x27;ssh2-utils&#x27;);
var ssh = new SSH2Utils();

var ClucSsh = (function(){
  /**
   * Execute the commands on a remote machine over ssh
   *
   * @class ClucSsh
   */
  var ClucSsh = function(server, OutputHelper){
    this.cmds = [];
    this.shell = null;
    this.server = server;
    this.OutputHelper = OutputHelper || require(&#x27;./cluc-ssh-context.js&#x27;);
  };

  ClucSsh.prototype.createContext = function(){
    return new (this.OutputHelper)(this.server);
  };
  ClucSsh.prototype.stream = function(cmdStr,then){
    var shell = this.shell;
    ssh.run( shell, cmdStr, function sshStream(err, stream, stderr){
      then(err, stream, stderr, stream, shell);
    });
  };
  ClucSsh.prototype.exec = function(cmdStr,then){
    var shell = this.shell;
    ssh.exec(shell, cmdStr, function sshExecute(err, stdout, stderr){
      then(err, stdout, stderr, shell);
    });
  };

  ClucSsh.prototype.readFile = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.readFile.apply(ssh, args);
  };
  ClucSsh.prototype.readFileSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.readFileSudo.apply(ssh, args);
  };
  ClucSsh.prototype.streamReadFile = function(){
    var args = Array.prototype.slice.call(arguments);
    (args).unshift(this.shell);
    ssh.streamReadFile.apply(ssh, args);
  };
  ClucSsh.prototype.streamReadFileSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.streamReadFileSudo.apply(ssh, args);
  };
  ClucSsh.prototype.getFile = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.getFile.apply(ssh, args);
  };
  ClucSsh.prototype.ensureFileContains = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.ensureFileContains.apply(ssh, args);
  };
  ClucSsh.prototype.ensureFileContainsSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.ensureFileContainsSudo.apply(ssh, args);
  };
  ClucSsh.prototype.putFile = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.putFile.apply(ssh, args);
  };
  ClucSsh.prototype.putFileSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.putFileSudo.apply(ssh, args);
  };
  ClucSsh.prototype.writeFile = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.writeFile.apply(ssh, args);
  };
  ClucSsh.prototype.writeFileSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.writeFileSudo.apply(ssh, args);
  };
  ClucSsh.prototype.fileExists = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.fileExists.apply(ssh, args);
  };
  ClucSsh.prototype.fileExistsSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.fileExistsSudo.apply(ssh, args);
  };
  ClucSsh.prototype.rmdir = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.rmdir.apply(ssh, args);
  };
  ClucSsh.prototype.rmdirSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.rmdirSudo.apply(ssh, args);
  };
  ClucSsh.prototype.mktemp = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.mktemp.apply(ssh, args);
  };
  ClucSsh.prototype.mkdir = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.mkdir.apply(ssh, args);
  };
  ClucSsh.prototype.mkdirSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.mkdirSudo.apply(ssh, args);
  };
  ClucSsh.prototype.ensureEmptyDir = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.ensureEmptyDir.apply(ssh, args);
  };
  ClucSsh.prototype.ensureEmptyDirSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.ensureEmptyDirSudo.apply(ssh, args);
  };
  ClucSsh.prototype.ensureOwnership = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.ensureOwnership.apply(ssh, args);
  };
  ClucSsh.prototype.putDir = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.putDir.apply(ssh, args);
  };
  ClucSsh.prototype.putDirSudo = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.putDirSudo.apply(ssh, args);
  };
  ClucSsh.prototype.getDir = function(){
    var args = Array.prototype.slice.call(arguments);
    args.unshift(this.shell);
    ssh.getDir.apply(ssh, args);
  };

  ClucSsh.prototype.open = function(then){
    var that = this;
    if(!this.shell){
      try{
        ssh.getConnReady( this.server, function(err, shell){
          if(err) throw err;

          that.shell = shell;

          that.shell.on(&#x27;close&#x27; , function(){
            debug(&#x27;shell closed&#x27;);
          });
          if(then) then(null, that.shell);
        });
      }catch(e){
        if(then) then(e);
      }
    }else{
      if(then) then(null, that.shell);
    }
  };
  ClucSsh.prototype.close = function(then){
    var that = this;
    if(that.shell){
      setTimeout(function(){
        that.shell.end();
        that.shell = null;
        that.server = null;
        if(then) then();
      }, 500);
    }else{
      if(then) then();
    }
  };
  return ClucSsh;
})();

module.exports = ClucSsh;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
