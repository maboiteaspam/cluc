{"name":"Cluc","tagline":"command line under control","body":"# Cluc\r\n\r\nCommand line under control, a library to ease usage of command lines.\r\n\r\n# Demo\r\n\r\nwith child_process\r\n```js\r\n    var Cluc = require('cluc');\r\n\r\n    new Cluc()\r\n      .exec('ls -alh' , function(err,stdout,stderr){\r\n        this.confirm(/vagrant/, 'Username should display on unix.');\r\n        this.warn(/root/, 'Some files does not belong vagrant users.').or(function(err){\r\n            return new Error(err);\r\n          });\r\n          \r\n      })\r\n      .stream('ls -alh' , function(err,stdout,stderr){\r\n        this.confirm(/vagrant/, 'Username should display on unix.');\r\n        this.warn(/root/, 'Some files does not belong vagrant users.');\r\n        \r\n      }).stream('sudo apt-get remove apache2 -y', function(){\r\n          this.progress(/Reading (:<title>[\\w\\s]+)[ .]*(:<current>\\d+)%/);\r\n          this.mustnot(/0 to remove/, 'no package to remove found');\r\n          this.confirm(/([1-9]+) to remove/, ' found %s package to remove');\r\n          this.success(/(Removing [^ ]+\\s+[.]+)/i, 'Package removed !');\r\n          this.warn(/(Unable to locate package )/i, 'Package not found');\r\n          \r\n      }).stream('sudo apt-get install apache2 -y', function(){\r\n          this.mustnot(/You should explicitly select one to install/, \"too many results\");\r\n          this.mustnot(/has no installation candidate/, \"can not install httpd\");\r\n          this.watch(/Need to get ([0-9- ,-]+ [a-z]+) of archives/i);\r\n          this.watch(/After this operation, ([0-9- ,-]+ [a-z]+) of additional disk space will be used/i);\r\n          this.spin(/((Reading|Building).+)/i);\r\n          this.spin(/^\\s*([0-9]+%)/i);\r\n          this.warn(/(is already the newest version)/i, 'Already installed');\r\n          this.warn(/(0 newly installed)/i, 'Package not installed');\r\n          this.confirm(/([^ /]+)\\.deb/i);\r\n          this.success(/(1 newly installed)/i, 'Package installed !');\r\n          //this.redo(2);\r\n          //this.display();\r\n          \r\n        }).download('/home/vagrant/test', __dirname+'/fixtures/test.bashrc', function(err){\r\n           if(err) log.error(err);\r\n           \r\n        }).record(require('fs').createWriteStream('some/output.log'))\r\n        \r\n        .run( new Cluc.transports.process(), function(){\r\n          console.log('done');\r\n        });\r\n```\r\n\r\n\r\n\r\nwith ssh\r\n```js\r\n    var Cluc = require('cluc');\r\n\r\n    new Cluc()\r\n      .exec('ls -alh' , function(err,stdout,stderr){\r\n        this.confirm(/vagrant/, 'Username should display on unix.');\r\n        this.warn(/root/, 'Some files does not belong vagrant users.');\r\n        this.display();\r\n      })\r\n      .stream('ls -alh' , function(err,stdout,stderr){\r\n        this.confirm(/vagrant/, 'Username should display on unix.');\r\n        this.warn(/root/, 'Some files does not belong vagrant users.');\r\n      })\r\n      .run( new Cluc.transports.ssh(server), function(){\r\n        console.log('done');\r\n      });\r\n```\r\n\r\n# API\r\n\r\n#### [`Cluc`](doc/Cluc.md#Cluc)\r\n* [`Cluc.stream`](doc/Cluc.md#Cluc.stream)\r\n* [`Cluc.tail`](doc/Cluc.md#Cluc.tail)\r\n* [`Cluc.exec`](doc/Cluc.md#Cluc.#exec)\r\n* [`Cluc.run`](doc/Cluc.md#Cluc.#run)\r\n* [`Cluc.wait`](doc/Cluc.md#Cluc.#wait)\r\n* [`Cluc.concat`](doc/Cluc.md#Cluc.#concat)\r\n* [`Cluc.die`](doc/Cluc.md#Cluc.#die)\r\n\r\n#### [`Cluc.transports`]()\r\n* [`Cluc.transports.process`](doc/ClucChildProcess.md)\r\n* [`Cluc.transports.ssh`](doc/ClucSsh.md#ClucSsh)\r\n\r\n#### [`Cluc.output`]()\r\n* [`Cluc.output.process`](doc/ClucContext.md)\r\n* [`Cluc.output.ssh`](doc/ClucSSHContext.md)\r\n\r\n#### [`Cluc.rules`]()\r\n* [`Cluc.rules.must`](doc/ClucRule.md#ClucMust)\r\n* [`Cluc.rules.success`](doc/ClucRule.md#ClucSuccess)\r\n* [`Cluc.rules.mustnot`](doc/ClucRule.md#ClucMustNot)\r\n* [`Cluc.rules.confirm`](doc/ClucRule.md#ClucConfirm)\r\n* [`Cluc.rules.warn`](doc/ClucRule.md#ClucWarn)\r\n* [`Cluc.rules.watch`](doc/ClucRule.md#ClucWatch)\r\n* [`Cluc.rules.answer`](doc/ClucRule.md#ClucAnswer)\r\n* [`Cluc.rules.display`](doc/ClucRule.md#ClucDisplay)\r\n\r\n\r\n#### [`ClucChildProcess`](doc/ClucChildProcess.md#ClucSsh)\r\n* [`ClucChildProcess.exec`](doc/ClucChildProcess.md#ClucSsh.exec)\r\n* [`ClucChildProcess.stream`](doc/ClucChildProcess.md#ClucSsh.stream)\r\n* [`ClucChildProcess.run`](doc/ClucChildProcess.md#ClucSsh.run)\r\n* [`ClucChildProcess.createContext`](doc/ClucChildProcess.md#ClucSsh.createContext)\r\n\r\n\r\n#### [`ClucContext`](doc/ClucContext.md#ClucContext)\r\n* [`ClucContext.init`](doc/ClucContext.md#ClucContext.init)\r\n* [`ClucContext.pushRule`](doc/ClucContext.md#ClucContext.pushRule)\r\n* [`ClucContext.must`](doc/ClucContext.md#ClucContext.must)\r\n* [`ClucContext.success`](doc/ClucContext.md#ClucContext.success)\r\n* [`ClucContext.confirm`](doc/ClucContext.md#ClucContext.confirm)\r\n* [`ClucContext.mustnot`](doc/ClucContext.md#ClucContext.mustnot)\r\n* [`ClucContext.warn`](doc/ClucContext.md#ClucContext.warn)\r\n* [`ClucContext.watch`](doc/ClucContext.md#ClucContext.watch)\r\n* [`ClucContext.answer`](doc/ClucContext.md#ClucContext.answer)\r\n* [`ClucContext.display`](doc/ClucContext.md#ClucContext.display)\r\n* [`ClucContext.redo`](doc/ClucContext.md#ClucContext.redo)\r\n\r\n\r\n#### [`ClucSsh`](doc/ClucSsh.md#ClucSsh)\r\n* [`ClucSsh.exec`](doc/ClucSsh.md#ClucSsh.exec)\r\n* [`ClucSsh.stream`](doc/ClucSsh.md#ClucSsh.stream)\r\n* [`ClucSsh.run`](doc/ClucSsh.md#ClucSsh.run)\r\n* [`ClucSsh.createContext`](doc/ClucSsh.md#ClucSsh.createContext)\r\n\r\n        \r\n#### [`ClucSSHContext`](doc/ClucSSHContext.md#ClucSSHContext)\r\n* [`ClucSSHContext.init`](doc/ClucSSHContext.md#ClucSSHContext.init)\r\n* [`ClucSSHContext.pushRule`](doc/ClucSSHContext.md#ClucSSHContext.pushRule)\r\n* [`ClucSSHContext.is`](doc/ClucSSHContext.md#ClucSSHContext.is)\r\n* [`ClucSSHContext.must`](doc/ClucSSHContext.md#ClucSSHContext.must)\r\n* [`ClucSSHContext.success`](doc/ClucSSHContext.md#ClucSSHContext.success)\r\n* [`ClucSSHContext.confirm`](doc/ClucSSHContext.md#ClucSSHContext.confirm)\r\n* [`ClucSSHContext.mustnot`](doc/ClucSSHContext.md#ClucSSHContext.mustnot)\r\n* [`ClucSSHContext.warn`](doc/ClucSSHContext.md#ClucSSHContext.warn)\r\n* [`ClucSSHContext.watch`](doc/ClucSSHContext.md#ClucSSHContext.watch)\r\n* [`ClucSSHContext.answer`](doc/ClucSSHContext.md#ClucSSHContext.answer)\r\n* [`ClucSSHContext.display`](doc/ClucSSHContext.md#ClucSSHContext.display)\r\n* [`ClucSSHContext.redo`](doc/ClucSSHContext.md#ClucSSHContext.redo)\r\n\r\n\r\n#### [`ClucRule`](doc/ClucRule.md#ClucRule)\r\n* [`ClucRule.init`](doc/ClucRule.md#ClucRule.init)\r\n* [`ClucRule.forgeErrorMessage`](doc/ClucRule.md#ClucRule.forgeErrorMessage)\r\n* [`ClucRule.testData`](doc/ClucRule.md#ClucRule.testData)\r\n* [`ClucRule.close`](doc/ClucRule.md#ClucRule.close)\r\n* [`ClucRule.hasFailed`](doc/ClucRule.md#ClucRule.hasFailed)\r\n* [`ClucRule.or`](doc/ClucRule.md#ClucRule.or)\r\n\r\n    \r\n#### [`ClucMust`](doc/ClucRule.md#ClucMust)\r\n* [`ClucMust.onClose`](doc/ClucRule.md#ClucMust.onClose)\r\n\r\n    \r\n#### [`ClucSuccess`](doc/ClucRule.md#ClucSuccess)\r\n* [`ClucSuccess.onceMatch`](doc/ClucRule.md#ClucSuccess.onceMatch)\r\n\r\n    \r\n#### [`ClucMustNot`](doc/ClucRule.md#ClucMustNot)\r\n* [`ClucMustNot.onData`](doc/ClucRule.md#ClucMustNot.onData)\r\n\r\n    \r\n#### [`ClucConfirm`](doc/ClucRule.md#ClucConfirm)\r\n* [`ClucConfirm.onceMatch`](doc/ClucRule.md#ClucConfirm.onceMatch)\r\n\r\n    \r\n#### [`ClucWarn`](doc/ClucRule.md#ClucWarn)\r\n* [`ClucWarn.onceMatch`](doc/ClucRule.md#ClucWarn.onceMatch)\r\n\r\n    \r\n#### [`ClucWatch`](doc/ClucRule.md#ClucWatch)\r\n* [`ClucWatch.onData`](doc/ClucRule.md#ClucWatch.onData)\r\n\r\n    \r\n#### [`ClucAnswer`](doc/ClucRule.md#ClucAnswer)\r\n* [`ClucAnswer.onData`](doc/ClucRule.md#ClucAnswer.onData)\r\n    \r\n    \r\n#### [`ClucDisplay`](doc/ClucRule.md#ClucDisplay)\r\n* [`ClucDisplay.onData`](doc/ClucRule.md#ClucDisplay.onData)\r\n\r\n\r\n---------------------------------------\r\n\r\n# Status\r\n\r\nIn development. \r\nIt needs some tests. \r\nIt misses putFile and readDir implementations. \r\nDocumentation update.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}